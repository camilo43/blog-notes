{"ast":null,"code":"var hpack = require('../hpack');\nvar utils = hpack.utils;\nvar encoder = hpack.encoder;\nvar table = hpack.table;\nvar assert = utils.assert;\nvar inherits = require('inherits');\nvar Duplex = require('readable-stream').Duplex;\nfunction Compressor(options) {\n  Duplex.call(this, {\n    writableObjectMode: true\n  });\n  this._encoder = null;\n  this._table = table.create(options.table);\n}\ninherits(Compressor, Duplex);\nmodule.exports = Compressor;\nCompressor.create = function create(options) {\n  return new Compressor(options);\n};\nCompressor.prototype._read = function _read() {\n  // We only push!\n};\nCompressor.prototype._write = function _write(data, enc, cb) {\n  assert(Array.isArray(data), 'Compressor.write() expects list of headers');\n  this._encoder = encoder.create();\n  for (var i = 0; i < data.length; i++) this._encodeHeader(data[i]);\n  var data = this._encoder.render();\n  this._encoder = null;\n  cb(null);\n  for (var i = 0; i < data.length; i++) this.push(data[i]);\n};\nCompressor.prototype.updateTableSize = function updateTableSize(size) {\n  if (size >= this._table.protocolMaxSize) {\n    size = this._table.protocolMaxSize;\n    var enc = encoder.create();\n\n    // indexed = 0\n    // incremental = 0\n    // update = 1\n    enc.encodeBits(1, 3);\n    enc.encodeInt(size);\n    var data = enc.render();\n    for (var i = 0; i < data.length; i++) this.push(data[i]);\n  }\n  this._table.updateSize(size);\n};\nCompressor.prototype.reset = function reset() {\n  var enc = encoder.create();\n  var size = this._table.maxSize;\n\n  // indexed = 0\n  // incremental = 0\n  // update = 1\n  enc.encodeBits(1, 3);\n  enc.encodeInt(0);\n\n  // Evict everything\n  this._table.updateSize(0);\n\n  // indexed = 0\n  // incremental = 0\n  // update = 1\n  enc.encodeBits(1, 3);\n  enc.encodeInt(size);\n\n  // Revert size\n  this._table.updateSize(size);\n  var data = enc.render();\n  for (var i = 0; i < data.length; i++) this.push(data[i]);\n};\nCompressor.prototype._encodeHeader = function _encodeHeader(header) {\n  if (header.neverIndex) {\n    var index = 0;\n    var neverIndex = 1;\n    var isIndexed = 0;\n    var isIncremental = 0;\n  } else {\n    var index = this._table.reverseLookup(header.name, header.value);\n    var isIndexed = index > 0;\n    var isIncremental = header.incremental !== false;\n    var neverIndex = 0;\n  }\n  this._encoder.encodeBit(isIndexed);\n  if (isIndexed) {\n    this._encoder.encodeInt(index);\n    return;\n  }\n  var name = utils.toArray(header.name);\n  var value = utils.toArray(header.value);\n  this._encoder.encodeBit(isIncremental);\n  if (isIncremental) {\n    this._table.add(header.name, header.value, name.length, value.length);\n  } else {\n    // Update = false\n    this._encoder.encodeBit(0);\n    this._encoder.encodeBit(neverIndex);\n  }\n\n  // index is negative for `name`-only headers\n  this._encoder.encodeInt(-index);\n  if (index === 0) this._encoder.encodeStr(name, header.huffman !== false);\n  this._encoder.encodeStr(value, header.huffman !== false);\n};","map":{"version":3,"names":["hpack","require","utils","encoder","table","assert","inherits","Duplex","Compressor","options","call","writableObjectMode","_encoder","_table","create","module","exports","prototype","_read","_write","data","enc","cb","Array","isArray","i","length","_encodeHeader","render","push","updateTableSize","size","protocolMaxSize","encodeBits","encodeInt","updateSize","reset","maxSize","header","neverIndex","index","isIndexed","isIncremental","reverseLookup","name","value","incremental","encodeBit","toArray","add","encodeStr","huffman"],"sources":["/Users/juancvegao/Documents/PROGRAMMING/REACT/ejerciciosUniversidad/notes_github/frontend/node_modules/hpack.js/lib/hpack/compressor.js"],"sourcesContent":["var hpack = require('../hpack');\nvar utils = hpack.utils;\nvar encoder = hpack.encoder;\nvar table = hpack.table;\nvar assert = utils.assert;\n\nvar inherits = require('inherits');\nvar Duplex = require('readable-stream').Duplex;\n\nfunction Compressor(options) {\n  Duplex.call(this, {\n    writableObjectMode: true\n  });\n\n  this._encoder = null;\n  this._table = table.create(options.table);\n}\ninherits(Compressor, Duplex);\nmodule.exports = Compressor;\n\nCompressor.create = function create(options) {\n  return new Compressor(options);\n};\n\nCompressor.prototype._read = function _read() {\n  // We only push!\n};\n\nCompressor.prototype._write = function _write(data, enc, cb) {\n  assert(Array.isArray(data), 'Compressor.write() expects list of headers');\n\n  this._encoder = encoder.create();\n  for (var i = 0; i < data.length; i++)\n    this._encodeHeader(data[i]);\n\n  var data = this._encoder.render();\n  this._encoder = null;\n\n  cb(null);\n  for (var i = 0; i < data.length; i++)\n    this.push(data[i]);\n};\n\nCompressor.prototype.updateTableSize = function updateTableSize(size) {\n  if (size >= this._table.protocolMaxSize) {\n    size = this._table.protocolMaxSize;\n\n    var enc = encoder.create();\n\n    // indexed = 0\n    // incremental = 0\n    // update = 1\n    enc.encodeBits(1, 3);\n    enc.encodeInt(size);\n\n    var data = enc.render();\n    for (var i = 0; i < data.length; i++)\n      this.push(data[i]);\n  }\n\n  this._table.updateSize(size);\n};\n\nCompressor.prototype.reset = function reset() {\n  var enc = encoder.create();\n  var size = this._table.maxSize;\n\n  // indexed = 0\n  // incremental = 0\n  // update = 1\n  enc.encodeBits(1, 3);\n  enc.encodeInt(0);\n\n  // Evict everything\n  this._table.updateSize(0);\n\n  // indexed = 0\n  // incremental = 0\n  // update = 1\n  enc.encodeBits(1, 3);\n  enc.encodeInt(size);\n\n  // Revert size\n  this._table.updateSize(size);\n\n  var data = enc.render();\n  for (var i = 0; i < data.length; i++)\n    this.push(data[i]);\n};\n\nCompressor.prototype._encodeHeader = function _encodeHeader(header) {\n  if (header.neverIndex) {\n    var index = 0;\n    var neverIndex = 1;\n    var isIndexed = 0;\n    var isIncremental = 0;\n  } else {\n    var index = this._table.reverseLookup(header.name, header.value);\n    var isIndexed = index > 0;\n    var isIncremental = header.incremental !== false;\n    var neverIndex = 0;\n  }\n\n  this._encoder.encodeBit(isIndexed);\n  if (isIndexed) {\n    this._encoder.encodeInt(index);\n    return;\n  }\n\n  var name = utils.toArray(header.name);\n  var value = utils.toArray(header.value);\n\n  this._encoder.encodeBit(isIncremental);\n  if (isIncremental) {\n    this._table.add(header.name, header.value, name.length, value.length);\n  } else {\n    // Update = false\n    this._encoder.encodeBit(0);\n    this._encoder.encodeBit(neverIndex);\n  }\n\n  // index is negative for `name`-only headers\n  this._encoder.encodeInt(-index);\n  if (index === 0)\n    this._encoder.encodeStr(name, header.huffman !== false);\n  this._encoder.encodeStr(value, header.huffman !== false);\n};\n"],"mappings":"AAAA,IAAIA,KAAK,GAAGC,OAAO,CAAC,UAAU,CAAC;AAC/B,IAAIC,KAAK,GAAGF,KAAK,CAACE,KAAK;AACvB,IAAIC,OAAO,GAAGH,KAAK,CAACG,OAAO;AAC3B,IAAIC,KAAK,GAAGJ,KAAK,CAACI,KAAK;AACvB,IAAIC,MAAM,GAAGH,KAAK,CAACG,MAAM;AAEzB,IAAIC,QAAQ,GAAGL,OAAO,CAAC,UAAU,CAAC;AAClC,IAAIM,MAAM,GAAGN,OAAO,CAAC,iBAAiB,CAAC,CAACM,MAAM;AAE9C,SAASC,UAAU,CAACC,OAAO,EAAE;EAC3BF,MAAM,CAACG,IAAI,CAAC,IAAI,EAAE;IAChBC,kBAAkB,EAAE;EACtB,CAAC,CAAC;EAEF,IAAI,CAACC,QAAQ,GAAG,IAAI;EACpB,IAAI,CAACC,MAAM,GAAGT,KAAK,CAACU,MAAM,CAACL,OAAO,CAACL,KAAK,CAAC;AAC3C;AACAE,QAAQ,CAACE,UAAU,EAAED,MAAM,CAAC;AAC5BQ,MAAM,CAACC,OAAO,GAAGR,UAAU;AAE3BA,UAAU,CAACM,MAAM,GAAG,SAASA,MAAM,CAACL,OAAO,EAAE;EAC3C,OAAO,IAAID,UAAU,CAACC,OAAO,CAAC;AAChC,CAAC;AAEDD,UAAU,CAACS,SAAS,CAACC,KAAK,GAAG,SAASA,KAAK,GAAG;EAC5C;AAAA,CACD;AAEDV,UAAU,CAACS,SAAS,CAACE,MAAM,GAAG,SAASA,MAAM,CAACC,IAAI,EAAEC,GAAG,EAAEC,EAAE,EAAE;EAC3DjB,MAAM,CAACkB,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC,EAAE,4CAA4C,CAAC;EAEzE,IAAI,CAACR,QAAQ,GAAGT,OAAO,CAACW,MAAM,EAAE;EAChC,KAAK,IAAIW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,IAAI,CAACM,MAAM,EAAED,CAAC,EAAE,EAClC,IAAI,CAACE,aAAa,CAACP,IAAI,CAACK,CAAC,CAAC,CAAC;EAE7B,IAAIL,IAAI,GAAG,IAAI,CAACR,QAAQ,CAACgB,MAAM,EAAE;EACjC,IAAI,CAAChB,QAAQ,GAAG,IAAI;EAEpBU,EAAE,CAAC,IAAI,CAAC;EACR,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,IAAI,CAACM,MAAM,EAAED,CAAC,EAAE,EAClC,IAAI,CAACI,IAAI,CAACT,IAAI,CAACK,CAAC,CAAC,CAAC;AACtB,CAAC;AAEDjB,UAAU,CAACS,SAAS,CAACa,eAAe,GAAG,SAASA,eAAe,CAACC,IAAI,EAAE;EACpE,IAAIA,IAAI,IAAI,IAAI,CAAClB,MAAM,CAACmB,eAAe,EAAE;IACvCD,IAAI,GAAG,IAAI,CAAClB,MAAM,CAACmB,eAAe;IAElC,IAAIX,GAAG,GAAGlB,OAAO,CAACW,MAAM,EAAE;;IAE1B;IACA;IACA;IACAO,GAAG,CAACY,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;IACpBZ,GAAG,CAACa,SAAS,CAACH,IAAI,CAAC;IAEnB,IAAIX,IAAI,GAAGC,GAAG,CAACO,MAAM,EAAE;IACvB,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,IAAI,CAACM,MAAM,EAAED,CAAC,EAAE,EAClC,IAAI,CAACI,IAAI,CAACT,IAAI,CAACK,CAAC,CAAC,CAAC;EACtB;EAEA,IAAI,CAACZ,MAAM,CAACsB,UAAU,CAACJ,IAAI,CAAC;AAC9B,CAAC;AAEDvB,UAAU,CAACS,SAAS,CAACmB,KAAK,GAAG,SAASA,KAAK,GAAG;EAC5C,IAAIf,GAAG,GAAGlB,OAAO,CAACW,MAAM,EAAE;EAC1B,IAAIiB,IAAI,GAAG,IAAI,CAAClB,MAAM,CAACwB,OAAO;;EAE9B;EACA;EACA;EACAhB,GAAG,CAACY,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;EACpBZ,GAAG,CAACa,SAAS,CAAC,CAAC,CAAC;;EAEhB;EACA,IAAI,CAACrB,MAAM,CAACsB,UAAU,CAAC,CAAC,CAAC;;EAEzB;EACA;EACA;EACAd,GAAG,CAACY,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;EACpBZ,GAAG,CAACa,SAAS,CAACH,IAAI,CAAC;;EAEnB;EACA,IAAI,CAAClB,MAAM,CAACsB,UAAU,CAACJ,IAAI,CAAC;EAE5B,IAAIX,IAAI,GAAGC,GAAG,CAACO,MAAM,EAAE;EACvB,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,IAAI,CAACM,MAAM,EAAED,CAAC,EAAE,EAClC,IAAI,CAACI,IAAI,CAACT,IAAI,CAACK,CAAC,CAAC,CAAC;AACtB,CAAC;AAEDjB,UAAU,CAACS,SAAS,CAACU,aAAa,GAAG,SAASA,aAAa,CAACW,MAAM,EAAE;EAClE,IAAIA,MAAM,CAACC,UAAU,EAAE;IACrB,IAAIC,KAAK,GAAG,CAAC;IACb,IAAID,UAAU,GAAG,CAAC;IAClB,IAAIE,SAAS,GAAG,CAAC;IACjB,IAAIC,aAAa,GAAG,CAAC;EACvB,CAAC,MAAM;IACL,IAAIF,KAAK,GAAG,IAAI,CAAC3B,MAAM,CAAC8B,aAAa,CAACL,MAAM,CAACM,IAAI,EAAEN,MAAM,CAACO,KAAK,CAAC;IAChE,IAAIJ,SAAS,GAAGD,KAAK,GAAG,CAAC;IACzB,IAAIE,aAAa,GAAGJ,MAAM,CAACQ,WAAW,KAAK,KAAK;IAChD,IAAIP,UAAU,GAAG,CAAC;EACpB;EAEA,IAAI,CAAC3B,QAAQ,CAACmC,SAAS,CAACN,SAAS,CAAC;EAClC,IAAIA,SAAS,EAAE;IACb,IAAI,CAAC7B,QAAQ,CAACsB,SAAS,CAACM,KAAK,CAAC;IAC9B;EACF;EAEA,IAAII,IAAI,GAAG1C,KAAK,CAAC8C,OAAO,CAACV,MAAM,CAACM,IAAI,CAAC;EACrC,IAAIC,KAAK,GAAG3C,KAAK,CAAC8C,OAAO,CAACV,MAAM,CAACO,KAAK,CAAC;EAEvC,IAAI,CAACjC,QAAQ,CAACmC,SAAS,CAACL,aAAa,CAAC;EACtC,IAAIA,aAAa,EAAE;IACjB,IAAI,CAAC7B,MAAM,CAACoC,GAAG,CAACX,MAAM,CAACM,IAAI,EAAEN,MAAM,CAACO,KAAK,EAAED,IAAI,CAAClB,MAAM,EAAEmB,KAAK,CAACnB,MAAM,CAAC;EACvE,CAAC,MAAM;IACL;IACA,IAAI,CAACd,QAAQ,CAACmC,SAAS,CAAC,CAAC,CAAC;IAC1B,IAAI,CAACnC,QAAQ,CAACmC,SAAS,CAACR,UAAU,CAAC;EACrC;;EAEA;EACA,IAAI,CAAC3B,QAAQ,CAACsB,SAAS,CAAC,CAACM,KAAK,CAAC;EAC/B,IAAIA,KAAK,KAAK,CAAC,EACb,IAAI,CAAC5B,QAAQ,CAACsC,SAAS,CAACN,IAAI,EAAEN,MAAM,CAACa,OAAO,KAAK,KAAK,CAAC;EACzD,IAAI,CAACvC,QAAQ,CAACsC,SAAS,CAACL,KAAK,EAAEP,MAAM,CAACa,OAAO,KAAK,KAAK,CAAC;AAC1D,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}