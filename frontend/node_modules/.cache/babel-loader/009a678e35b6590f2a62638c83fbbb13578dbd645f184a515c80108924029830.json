{"ast":null,"code":"'use strict';\n\nvar transport = require('../../../spdy-transport');\nvar constants = require('./').constants;\nvar base = transport.protocol.base;\nvar utils = base.utils;\nvar assert = require('assert');\nvar util = require('util');\nvar Buffer = require('buffer').Buffer;\nvar WriteBuffer = require('wbuf');\nvar debug = require('debug')('spdy:framer');\nfunction Framer(options) {\n  base.Framer.call(this, options);\n}\nutil.inherits(Framer, base.Framer);\nmodule.exports = Framer;\nFramer.create = function create(options) {\n  return new Framer(options);\n};\nFramer.prototype.setMaxFrameSize = function setMaxFrameSize(size) {\n  // http2-only\n};\nFramer.prototype.headersToDict = function headersToDict(headers, preprocess, callback) {\n  function stringify(value) {\n    if (value !== undefined) {\n      if (Array.isArray(value)) {\n        return value.join('\\x00');\n      } else if (typeof value === 'string') {\n        return value;\n      } else {\n        return value.toString();\n      }\n    } else {\n      return '';\n    }\n  }\n\n  // Lower case of all headers keys\n  var loweredHeaders = {};\n  Object.keys(headers || {}).map(function (key) {\n    loweredHeaders[key.toLowerCase()] = headers[key];\n  });\n\n  // Allow outer code to add custom headers or remove something\n  if (preprocess) {\n    preprocess(loweredHeaders);\n  }\n\n  // Transform object into kv pairs\n  var size = this.version === 2 ? 2 : 4;\n  var len = size;\n  var pairs = Object.keys(loweredHeaders).filter(function (key) {\n    var lkey = key.toLowerCase();\n\n    // Will be in `:host`\n    if (lkey === 'host' && this.version >= 3) {\n      return false;\n    }\n    return lkey !== 'connection' && lkey !== 'keep-alive' && lkey !== 'proxy-connection' && lkey !== 'transfer-encoding';\n  }, this).map(function (key) {\n    var klen = Buffer.byteLength(key);\n    var value = stringify(loweredHeaders[key]);\n    var vlen = Buffer.byteLength(value);\n    len += size * 2 + klen + vlen;\n    return [klen, key, vlen, value];\n  });\n  var block = new WriteBuffer();\n  block.reserve(len);\n  if (this.version === 2) {\n    block.writeUInt16BE(pairs.length);\n  } else {\n    block.writeUInt32BE(pairs.length);\n  }\n  pairs.forEach(function (pair) {\n    // Write key length\n    if (this.version === 2) {\n      block.writeUInt16BE(pair[0]);\n    } else {\n      block.writeUInt32BE(pair[0]);\n    }\n\n    // Write key\n    block.write(pair[1]);\n\n    // Write value length\n    if (this.version === 2) {\n      block.writeUInt16BE(pair[2]);\n    } else {\n      block.writeUInt32BE(pair[2]);\n    }\n    // Write value\n    block.write(pair[3]);\n  }, this);\n  assert(this.compress !== null, 'Framer version not initialized');\n  this.compress.write(block.render(), callback);\n};\nFramer.prototype._frame = function _frame(frame, body, callback) {\n  if (!this.version) {\n    this.on('version', function () {\n      this._frame(frame, body, callback);\n    });\n    return;\n  }\n  debug('id=%d type=%s', frame.id, frame.type);\n  var buffer = new WriteBuffer();\n  buffer.writeUInt16BE(0x8000 | this.version);\n  buffer.writeUInt16BE(constants.frameType[frame.type]);\n  buffer.writeUInt8(frame.flags);\n  var len = buffer.skip(3);\n  body(buffer);\n  var frameSize = buffer.size - constants.FRAME_HEADER_SIZE;\n  len.writeUInt24BE(frameSize);\n  var chunks = buffer.render();\n  var toWrite = {\n    stream: frame.id,\n    priority: false,\n    chunks: chunks,\n    callback: callback\n  };\n  this._resetTimeout();\n  this.schedule(toWrite);\n  return chunks;\n};\nFramer.prototype._synFrame = function _synFrame(frame, callback) {\n  var self = this;\n  if (!frame.path) {\n    throw new Error('`path` is required frame argument');\n  }\n  function preprocess(headers) {\n    var method = frame.method || base.constants.DEFAULT_METHOD;\n    var version = frame.version || 'HTTP/1.1';\n    var scheme = frame.scheme || 'https';\n    var host = frame.host || frame.headers && frame.headers.host || base.constants.DEFAULT_HOST;\n    if (self.version === 2) {\n      headers.method = method;\n      headers.version = version;\n      headers.url = frame.path;\n      headers.scheme = scheme;\n      headers.host = host;\n      if (frame.status) {\n        headers.status = frame.status;\n      }\n    } else {\n      headers[':method'] = method;\n      headers[':version'] = version;\n      headers[':path'] = frame.path;\n      headers[':scheme'] = scheme;\n      headers[':host'] = host;\n      if (frame.status) {\n        headers[':status'] = frame.status;\n      }\n    }\n  }\n  this.headersToDict(frame.headers, preprocess, function (err, chunks) {\n    if (err) {\n      if (callback) {\n        return callback(err);\n      } else {\n        return self.emit('error', err);\n      }\n    }\n    self._frame({\n      type: 'SYN_STREAM',\n      id: frame.id,\n      flags: frame.fin ? constants.flags.FLAG_FIN : 0\n    }, function (buf) {\n      buf.reserve(10);\n      buf.writeUInt32BE(frame.id & 0x7fffffff);\n      buf.writeUInt32BE(frame.associated & 0x7fffffff);\n      var weight = frame.priority && frame.priority.weight || constants.DEFAULT_WEIGHT;\n\n      // We only have 3 bits for priority in SPDY, try to fit it into this\n      var priority = utils.weightToPriority(weight);\n      buf.writeUInt8(priority << 5);\n\n      // CREDENTIALS slot\n      buf.writeUInt8(0);\n      for (var i = 0; i < chunks.length; i++) {\n        buf.copyFrom(chunks[i]);\n      }\n    }, callback);\n  });\n};\nFramer.prototype.requestFrame = function requestFrame(frame, callback) {\n  this._synFrame({\n    id: frame.id,\n    fin: frame.fin,\n    associated: 0,\n    method: frame.method,\n    version: frame.version,\n    scheme: frame.scheme,\n    host: frame.host,\n    path: frame.path,\n    priority: frame.priority,\n    headers: frame.headers\n  }, callback);\n};\nFramer.prototype.responseFrame = function responseFrame(frame, callback) {\n  var self = this;\n  var reason = frame.reason;\n  if (!reason) {\n    reason = constants.statusReason[frame.status];\n  }\n  function preprocess(headers) {\n    if (self.version === 2) {\n      headers.status = frame.status + ' ' + reason;\n      headers.version = 'HTTP/1.1';\n    } else {\n      headers[':status'] = frame.status + ' ' + reason;\n      headers[':version'] = 'HTTP/1.1';\n    }\n  }\n  this.headersToDict(frame.headers, preprocess, function (err, chunks) {\n    if (err) {\n      if (callback) {\n        return callback(err);\n      } else {\n        return self.emit('error', err);\n      }\n    }\n    self._frame({\n      type: 'SYN_REPLY',\n      id: frame.id,\n      flags: 0\n    }, function (buf) {\n      buf.reserve(self.version === 2 ? 6 : 4);\n      buf.writeUInt32BE(frame.id & 0x7fffffff);\n\n      // Unused data\n      if (self.version === 2) {\n        buf.writeUInt16BE(0);\n      }\n      for (var i = 0; i < chunks.length; i++) {\n        buf.copyFrom(chunks[i]);\n      }\n    }, callback);\n  });\n};\nFramer.prototype.pushFrame = function pushFrame(frame, callback) {\n  var self = this;\n  this._checkPush(function (err) {\n    if (err) {\n      return callback(err);\n    }\n    self._synFrame({\n      id: frame.promisedId,\n      associated: frame.id,\n      method: frame.method,\n      status: frame.status || 200,\n      version: frame.version,\n      scheme: frame.scheme,\n      host: frame.host,\n      path: frame.path,\n      priority: frame.priority,\n      // Merge everything together, there is no difference in SPDY protocol\n      headers: Object.assign(Object.assign({}, frame.headers), frame.response)\n    }, callback);\n  });\n};\nFramer.prototype.headersFrame = function headersFrame(frame, callback) {\n  var self = this;\n  this.headersToDict(frame.headers, null, function (err, chunks) {\n    if (err) {\n      if (callback) {\n        return callback(err);\n      } else {\n        return self.emit('error', err);\n      }\n    }\n    self._frame({\n      type: 'HEADERS',\n      id: frame.id,\n      priority: false,\n      flags: 0\n    }, function (buf) {\n      buf.reserve(4 + (self.version === 2 ? 2 : 0));\n      buf.writeUInt32BE(frame.id & 0x7fffffff);\n\n      // Unused data\n      if (self.version === 2) {\n        buf.writeUInt16BE(0);\n      }\n      for (var i = 0; i < chunks.length; i++) {\n        buf.copyFrom(chunks[i]);\n      }\n    }, callback);\n  });\n};\nFramer.prototype.dataFrame = function dataFrame(frame, callback) {\n  if (!this.version) {\n    return this.on('version', function () {\n      this.dataFrame(frame, callback);\n    });\n  }\n  debug('id=%d type=DATA', frame.id);\n  var buffer = new WriteBuffer();\n  buffer.reserve(8 + frame.data.length);\n  buffer.writeUInt32BE(frame.id & 0x7fffffff);\n  buffer.writeUInt8(frame.fin ? 0x01 : 0x0);\n  buffer.writeUInt24BE(frame.data.length);\n  buffer.copyFrom(frame.data);\n  var chunks = buffer.render();\n  var toWrite = {\n    stream: frame.id,\n    priority: frame.priority,\n    chunks: chunks,\n    callback: callback\n  };\n  var self = this;\n  this._resetTimeout();\n  var bypass = this.version < 3.1;\n  this.window.send.update(-frame.data.length, bypass ? undefined : function () {\n    self._resetTimeout();\n    self.schedule(toWrite);\n  });\n  if (bypass) {\n    this._resetTimeout();\n    this.schedule(toWrite);\n  }\n};\nFramer.prototype.pingFrame = function pingFrame(frame, callback) {\n  this._frame({\n    type: 'PING',\n    id: 0,\n    flags: 0\n  }, function (buf, callback) {\n    buf.reserve(4);\n    var opaque = frame.opaque;\n    buf.writeUInt32BE(opaque.readUInt32BE(opaque.length - 4, true));\n  }, callback);\n};\nFramer.prototype.rstFrame = function rstFrame(frame, callback) {\n  this._frame({\n    type: 'RST_STREAM',\n    id: frame.id,\n    flags: 0\n  }, function (buf) {\n    buf.reserve(8);\n\n    // Stream ID\n    buf.writeUInt32BE(frame.id & 0x7fffffff);\n    // Status Code\n    buf.writeUInt32BE(constants.error[frame.code]);\n\n    // Extra debugging information\n    if (frame.extra) {\n      buf.write(frame.extra);\n    }\n  }, callback);\n};\nFramer.prototype.prefaceFrame = function prefaceFrame() {};\nFramer.prototype.settingsFrame = function settingsFrame(options, callback) {\n  var self = this;\n  var key = this.version + '/' + JSON.stringify(options);\n  var settings = Framer.settingsCache[key];\n  if (settings) {\n    debug('cached settings');\n    this._resetTimeout();\n    this.schedule({\n      stream: 0,\n      priority: false,\n      chunks: settings,\n      callback: callback\n    });\n    return;\n  }\n  var params = [];\n  for (var i = 0; i < constants.settingsIndex.length; i++) {\n    var name = constants.settingsIndex[i];\n    if (!name) {\n      continue;\n    }\n\n    // value: Infinity\n    if (!isFinite(options[name])) {\n      continue;\n    }\n    if (options[name] !== undefined) {\n      params.push({\n        key: i,\n        value: options[name]\n      });\n    }\n  }\n  var frame = this._frame({\n    type: 'SETTINGS',\n    id: 0,\n    flags: 0\n  }, function (buf) {\n    buf.reserve(4 + 8 * params.length);\n\n    // Count of entries\n    buf.writeUInt32BE(params.length);\n    params.forEach(function (param) {\n      var flag = constants.settings.FLAG_SETTINGS_PERSIST_VALUE << 24;\n      if (self.version === 2) {\n        buf.writeUInt32LE(flag | param.key);\n      } else {\n        buf.writeUInt32BE(flag | param.key);\n      }\n      buf.writeUInt32BE(param.value & 0x7fffffff);\n    });\n  }, callback);\n  Framer.settingsCache[key] = frame;\n};\nFramer.settingsCache = {};\nFramer.prototype.ackSettingsFrame = function ackSettingsFrame(callback) {\n  if (callback) {\n    process.nextTick(callback);\n  }\n};\nFramer.prototype.windowUpdateFrame = function windowUpdateFrame(frame, callback) {\n  this._frame({\n    type: 'WINDOW_UPDATE',\n    id: frame.id,\n    flags: 0\n  }, function (buf) {\n    buf.reserve(8);\n\n    // ID\n    buf.writeUInt32BE(frame.id & 0x7fffffff);\n\n    // Delta\n    buf.writeInt32BE(frame.delta);\n  }, callback);\n};\nFramer.prototype.goawayFrame = function goawayFrame(frame, callback) {\n  this._frame({\n    type: 'GOAWAY',\n    id: 0,\n    flags: 0\n  }, function (buf) {\n    buf.reserve(8);\n\n    // Last-good-stream-ID\n    buf.writeUInt32BE(frame.lastId & 0x7fffffff);\n    // Status\n    buf.writeUInt32BE(constants.goaway[frame.code]);\n  }, callback);\n};\nFramer.prototype.priorityFrame = function priorityFrame(frame, callback) {\n  // No such thing in SPDY\n  if (callback) {\n    process.nextTick(callback);\n  }\n};\nFramer.prototype.xForwardedFor = function xForwardedFor(frame, callback) {\n  this._frame({\n    type: 'X_FORWARDED_FOR',\n    id: 0,\n    flags: 0\n  }, function (buf) {\n    buf.writeUInt32BE(Buffer.byteLength(frame.host));\n    buf.write(frame.host);\n  }, callback);\n};","map":{"version":3,"names":["transport","require","constants","base","protocol","utils","assert","util","Buffer","WriteBuffer","debug","Framer","options","call","inherits","module","exports","create","prototype","setMaxFrameSize","size","headersToDict","headers","preprocess","callback","stringify","value","undefined","Array","isArray","join","toString","loweredHeaders","Object","keys","map","key","toLowerCase","version","len","pairs","filter","lkey","klen","byteLength","vlen","block","reserve","writeUInt16BE","length","writeUInt32BE","forEach","pair","write","compress","render","_frame","frame","body","on","id","type","buffer","frameType","writeUInt8","flags","skip","frameSize","FRAME_HEADER_SIZE","writeUInt24BE","chunks","toWrite","stream","priority","_resetTimeout","schedule","_synFrame","self","path","Error","method","DEFAULT_METHOD","scheme","host","DEFAULT_HOST","url","status","err","emit","fin","FLAG_FIN","buf","associated","weight","DEFAULT_WEIGHT","weightToPriority","i","copyFrom","requestFrame","responseFrame","reason","statusReason","pushFrame","_checkPush","promisedId","assign","response","headersFrame","dataFrame","data","bypass","window","send","update","pingFrame","opaque","readUInt32BE","rstFrame","error","code","extra","prefaceFrame","settingsFrame","JSON","settings","settingsCache","params","settingsIndex","name","isFinite","push","param","flag","FLAG_SETTINGS_PERSIST_VALUE","writeUInt32LE","ackSettingsFrame","process","nextTick","windowUpdateFrame","writeInt32BE","delta","goawayFrame","lastId","goaway","priorityFrame","xForwardedFor"],"sources":["/Users/juancvegao/Documents/PROGRAMMING/REACT/ejerciciosUniversidad/notes_github/frontend/node_modules/spdy-transport/lib/spdy-transport/protocol/spdy/framer.js"],"sourcesContent":["'use strict'\n\nvar transport = require('../../../spdy-transport')\nvar constants = require('./').constants\nvar base = transport.protocol.base\nvar utils = base.utils\n\nvar assert = require('assert')\nvar util = require('util')\nvar Buffer = require('buffer').Buffer\nvar WriteBuffer = require('wbuf')\n\nvar debug = require('debug')('spdy:framer')\n\nfunction Framer (options) {\n  base.Framer.call(this, options)\n}\nutil.inherits(Framer, base.Framer)\nmodule.exports = Framer\n\nFramer.create = function create (options) {\n  return new Framer(options)\n}\n\nFramer.prototype.setMaxFrameSize = function setMaxFrameSize (size) {\n  // http2-only\n}\n\nFramer.prototype.headersToDict = function headersToDict (headers,\n  preprocess,\n  callback) {\n  function stringify (value) {\n    if (value !== undefined) {\n      if (Array.isArray(value)) {\n        return value.join('\\x00')\n      } else if (typeof value === 'string') {\n        return value\n      } else {\n        return value.toString()\n      }\n    } else {\n      return ''\n    }\n  }\n\n  // Lower case of all headers keys\n  var loweredHeaders = {}\n  Object.keys(headers || {}).map(function (key) {\n    loweredHeaders[key.toLowerCase()] = headers[key]\n  })\n\n  // Allow outer code to add custom headers or remove something\n  if (preprocess) { preprocess(loweredHeaders) }\n\n  // Transform object into kv pairs\n  var size = this.version === 2 ? 2 : 4\n  var len = size\n  var pairs = Object.keys(loweredHeaders).filter(function (key) {\n    var lkey = key.toLowerCase()\n\n    // Will be in `:host`\n    if (lkey === 'host' && this.version >= 3) {\n      return false\n    }\n\n    return lkey !== 'connection' && lkey !== 'keep-alive' &&\n           lkey !== 'proxy-connection' && lkey !== 'transfer-encoding'\n  }, this).map(function (key) {\n    var klen = Buffer.byteLength(key)\n    var value = stringify(loweredHeaders[key])\n    var vlen = Buffer.byteLength(value)\n\n    len += size * 2 + klen + vlen\n    return [klen, key, vlen, value]\n  })\n\n  var block = new WriteBuffer()\n  block.reserve(len)\n\n  if (this.version === 2) {\n    block.writeUInt16BE(pairs.length)\n  } else {\n    block.writeUInt32BE(pairs.length)\n  }\n\n  pairs.forEach(function (pair) {\n    // Write key length\n    if (this.version === 2) {\n      block.writeUInt16BE(pair[0])\n    } else {\n      block.writeUInt32BE(pair[0])\n    }\n\n    // Write key\n    block.write(pair[1])\n\n    // Write value length\n    if (this.version === 2) {\n      block.writeUInt16BE(pair[2])\n    } else {\n      block.writeUInt32BE(pair[2])\n    }\n    // Write value\n    block.write(pair[3])\n  }, this)\n\n  assert(this.compress !== null, 'Framer version not initialized')\n  this.compress.write(block.render(), callback)\n}\n\nFramer.prototype._frame = function _frame (frame, body, callback) {\n  if (!this.version) {\n    this.on('version', function () {\n      this._frame(frame, body, callback)\n    })\n    return\n  }\n\n  debug('id=%d type=%s', frame.id, frame.type)\n\n  var buffer = new WriteBuffer()\n\n  buffer.writeUInt16BE(0x8000 | this.version)\n  buffer.writeUInt16BE(constants.frameType[frame.type])\n  buffer.writeUInt8(frame.flags)\n  var len = buffer.skip(3)\n\n  body(buffer)\n\n  var frameSize = buffer.size - constants.FRAME_HEADER_SIZE\n  len.writeUInt24BE(frameSize)\n\n  var chunks = buffer.render()\n  var toWrite = {\n    stream: frame.id,\n    priority: false,\n    chunks: chunks,\n    callback: callback\n  }\n\n  this._resetTimeout()\n  this.schedule(toWrite)\n\n  return chunks\n}\n\nFramer.prototype._synFrame = function _synFrame (frame, callback) {\n  var self = this\n\n  if (!frame.path) {\n    throw new Error('`path` is required frame argument')\n  }\n\n  function preprocess (headers) {\n    var method = frame.method || base.constants.DEFAULT_METHOD\n    var version = frame.version || 'HTTP/1.1'\n    var scheme = frame.scheme || 'https'\n    var host = frame.host ||\n               (frame.headers && frame.headers.host) ||\n               base.constants.DEFAULT_HOST\n\n    if (self.version === 2) {\n      headers.method = method\n      headers.version = version\n      headers.url = frame.path\n      headers.scheme = scheme\n      headers.host = host\n      if (frame.status) {\n        headers.status = frame.status\n      }\n    } else {\n      headers[':method'] = method\n      headers[':version'] = version\n      headers[':path'] = frame.path\n      headers[':scheme'] = scheme\n      headers[':host'] = host\n      if (frame.status) { headers[':status'] = frame.status }\n    }\n  }\n\n  this.headersToDict(frame.headers, preprocess, function (err, chunks) {\n    if (err) {\n      if (callback) {\n        return callback(err)\n      } else {\n        return self.emit('error', err)\n      }\n    }\n\n    self._frame({\n      type: 'SYN_STREAM',\n      id: frame.id,\n      flags: frame.fin ? constants.flags.FLAG_FIN : 0\n    }, function (buf) {\n      buf.reserve(10)\n\n      buf.writeUInt32BE(frame.id & 0x7fffffff)\n      buf.writeUInt32BE(frame.associated & 0x7fffffff)\n\n      var weight = (frame.priority && frame.priority.weight) ||\n                   constants.DEFAULT_WEIGHT\n\n      // We only have 3 bits for priority in SPDY, try to fit it into this\n      var priority = utils.weightToPriority(weight)\n      buf.writeUInt8(priority << 5)\n\n      // CREDENTIALS slot\n      buf.writeUInt8(0)\n\n      for (var i = 0; i < chunks.length; i++) {\n        buf.copyFrom(chunks[i])\n      }\n    }, callback)\n  })\n}\n\nFramer.prototype.requestFrame = function requestFrame (frame, callback) {\n  this._synFrame({\n    id: frame.id,\n    fin: frame.fin,\n    associated: 0,\n    method: frame.method,\n    version: frame.version,\n    scheme: frame.scheme,\n    host: frame.host,\n    path: frame.path,\n    priority: frame.priority,\n    headers: frame.headers\n  }, callback)\n}\n\nFramer.prototype.responseFrame = function responseFrame (frame, callback) {\n  var self = this\n\n  var reason = frame.reason\n  if (!reason) {\n    reason = constants.statusReason[frame.status]\n  }\n\n  function preprocess (headers) {\n    if (self.version === 2) {\n      headers.status = frame.status + ' ' + reason\n      headers.version = 'HTTP/1.1'\n    } else {\n      headers[':status'] = frame.status + ' ' + reason\n      headers[':version'] = 'HTTP/1.1'\n    }\n  }\n\n  this.headersToDict(frame.headers, preprocess, function (err, chunks) {\n    if (err) {\n      if (callback) {\n        return callback(err)\n      } else {\n        return self.emit('error', err)\n      }\n    }\n\n    self._frame({\n      type: 'SYN_REPLY',\n      id: frame.id,\n      flags: 0\n    }, function (buf) {\n      buf.reserve(self.version === 2 ? 6 : 4)\n\n      buf.writeUInt32BE(frame.id & 0x7fffffff)\n\n      // Unused data\n      if (self.version === 2) {\n        buf.writeUInt16BE(0)\n      }\n\n      for (var i = 0; i < chunks.length; i++) {\n        buf.copyFrom(chunks[i])\n      }\n    }, callback)\n  })\n}\n\nFramer.prototype.pushFrame = function pushFrame (frame, callback) {\n  var self = this\n\n  this._checkPush(function (err) {\n    if (err) { return callback(err) }\n\n    self._synFrame({\n      id: frame.promisedId,\n      associated: frame.id,\n      method: frame.method,\n      status: frame.status || 200,\n      version: frame.version,\n      scheme: frame.scheme,\n      host: frame.host,\n      path: frame.path,\n      priority: frame.priority,\n\n      // Merge everything together, there is no difference in SPDY protocol\n      headers: Object.assign(Object.assign({}, frame.headers), frame.response)\n    }, callback)\n  })\n}\n\nFramer.prototype.headersFrame = function headersFrame (frame, callback) {\n  var self = this\n\n  this.headersToDict(frame.headers, null, function (err, chunks) {\n    if (err) {\n      if (callback) { return callback(err) } else {\n        return self.emit('error', err)\n      }\n    }\n\n    self._frame({\n      type: 'HEADERS',\n      id: frame.id,\n      priority: false,\n      flags: 0\n    }, function (buf) {\n      buf.reserve(4 + (self.version === 2 ? 2 : 0))\n      buf.writeUInt32BE(frame.id & 0x7fffffff)\n\n      // Unused data\n      if (self.version === 2) { buf.writeUInt16BE(0) }\n\n      for (var i = 0; i < chunks.length; i++) {\n        buf.copyFrom(chunks[i])\n      }\n    }, callback)\n  })\n}\n\nFramer.prototype.dataFrame = function dataFrame (frame, callback) {\n  if (!this.version) {\n    return this.on('version', function () {\n      this.dataFrame(frame, callback)\n    })\n  }\n\n  debug('id=%d type=DATA', frame.id)\n\n  var buffer = new WriteBuffer()\n  buffer.reserve(8 + frame.data.length)\n\n  buffer.writeUInt32BE(frame.id & 0x7fffffff)\n  buffer.writeUInt8(frame.fin ? 0x01 : 0x0)\n  buffer.writeUInt24BE(frame.data.length)\n  buffer.copyFrom(frame.data)\n\n  var chunks = buffer.render()\n  var toWrite = {\n    stream: frame.id,\n    priority: frame.priority,\n    chunks: chunks,\n    callback: callback\n  }\n\n  var self = this\n  this._resetTimeout()\n\n  var bypass = this.version < 3.1\n  this.window.send.update(-frame.data.length, bypass ? undefined : function () {\n    self._resetTimeout()\n    self.schedule(toWrite)\n  })\n\n  if (bypass) {\n    this._resetTimeout()\n    this.schedule(toWrite)\n  }\n}\n\nFramer.prototype.pingFrame = function pingFrame (frame, callback) {\n  this._frame({\n    type: 'PING',\n    id: 0,\n    flags: 0\n  }, function (buf, callback) {\n    buf.reserve(4)\n\n    var opaque = frame.opaque\n    buf.writeUInt32BE(opaque.readUInt32BE(opaque.length - 4, true))\n  }, callback)\n}\n\nFramer.prototype.rstFrame = function rstFrame (frame, callback) {\n  this._frame({\n    type: 'RST_STREAM',\n    id: frame.id,\n    flags: 0\n  }, function (buf) {\n    buf.reserve(8)\n\n    // Stream ID\n    buf.writeUInt32BE(frame.id & 0x7fffffff)\n    // Status Code\n    buf.writeUInt32BE(constants.error[frame.code])\n\n    // Extra debugging information\n    if (frame.extra) {\n      buf.write(frame.extra)\n    }\n  }, callback)\n}\n\nFramer.prototype.prefaceFrame = function prefaceFrame () {\n}\n\nFramer.prototype.settingsFrame = function settingsFrame (options, callback) {\n  var self = this\n\n  var key = this.version + '/' + JSON.stringify(options)\n\n  var settings = Framer.settingsCache[key]\n  if (settings) {\n    debug('cached settings')\n    this._resetTimeout()\n    this.schedule({\n      stream: 0,\n      priority: false,\n      chunks: settings,\n      callback: callback\n    })\n    return\n  }\n\n  var params = []\n  for (var i = 0; i < constants.settingsIndex.length; i++) {\n    var name = constants.settingsIndex[i]\n    if (!name) { continue }\n\n    // value: Infinity\n    if (!isFinite(options[name])) {\n      continue\n    }\n\n    if (options[name] !== undefined) {\n      params.push({ key: i, value: options[name] })\n    }\n  }\n\n  var frame = this._frame({\n    type: 'SETTINGS',\n    id: 0,\n    flags: 0\n  }, function (buf) {\n    buf.reserve(4 + 8 * params.length)\n\n    // Count of entries\n    buf.writeUInt32BE(params.length)\n\n    params.forEach(function (param) {\n      var flag = constants.settings.FLAG_SETTINGS_PERSIST_VALUE << 24\n\n      if (self.version === 2) {\n        buf.writeUInt32LE(flag | param.key)\n      } else { buf.writeUInt32BE(flag | param.key) }\n      buf.writeUInt32BE(param.value & 0x7fffffff)\n    })\n  }, callback)\n\n  Framer.settingsCache[key] = frame\n}\nFramer.settingsCache = {}\n\nFramer.prototype.ackSettingsFrame = function ackSettingsFrame (callback) {\n  if (callback) {\n    process.nextTick(callback)\n  }\n}\n\nFramer.prototype.windowUpdateFrame = function windowUpdateFrame (frame,\n  callback) {\n  this._frame({\n    type: 'WINDOW_UPDATE',\n    id: frame.id,\n    flags: 0\n  }, function (buf) {\n    buf.reserve(8)\n\n    // ID\n    buf.writeUInt32BE(frame.id & 0x7fffffff)\n\n    // Delta\n    buf.writeInt32BE(frame.delta)\n  }, callback)\n}\n\nFramer.prototype.goawayFrame = function goawayFrame (frame, callback) {\n  this._frame({\n    type: 'GOAWAY',\n    id: 0,\n    flags: 0\n  }, function (buf) {\n    buf.reserve(8)\n\n    // Last-good-stream-ID\n    buf.writeUInt32BE(frame.lastId & 0x7fffffff)\n    // Status\n    buf.writeUInt32BE(constants.goaway[frame.code])\n  }, callback)\n}\n\nFramer.prototype.priorityFrame = function priorityFrame (frame, callback) {\n  // No such thing in SPDY\n  if (callback) {\n    process.nextTick(callback)\n  }\n}\n\nFramer.prototype.xForwardedFor = function xForwardedFor (frame, callback) {\n  this._frame({\n    type: 'X_FORWARDED_FOR',\n    id: 0,\n    flags: 0\n  }, function (buf) {\n    buf.writeUInt32BE(Buffer.byteLength(frame.host))\n    buf.write(frame.host)\n  }, callback)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}